
var iconv = require('iconv-lite')


function encoding (req, value) {
  req.on('response', function (res) {
    // probably should detect the content encoding somehow
    var encoding = value

    if (req._res) {
      req._res = req._res.pipe(iconv.decodeStream(encoding))
    } else {
      req._res = res.pipe(iconv.decodeStream(encoding))
    }
  })
}

module.exports = encoding
