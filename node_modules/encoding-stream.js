
var iconv = require('iconv-lite')


function encoding (req, value) {
  req.on('response', function (res) {
    if (req._redirect) return
    // probably should detect the content encoding somehow
    var encoding = value

    req._res = (req._res || res).pipe(iconv.decodeStream(encoding || 'utf8'))
  })
}

module.exports = encoding
